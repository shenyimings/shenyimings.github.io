---
author: "Yiming Shen"
date: 2022-03-19
lastmod: 2022-03-19
title: "渗透测试记录"
tags: [
    "CTF",
    "Penetration",
    "Note",
]
categories: [
    "Notes",
     "CTF",
]
math: true
showtoc: true
tocopen: true
typora-root-url: ..\..\..\static\
---

## 基本概念

### 渗透测试

> 对计算机系统进行授权攻击，找出潜在的脆弱因素。

### 攻防演练

> 攻击方在找到脆弱因素的基础上，利用暴露的相关漏洞，获取防守方目标服务器控制权。

### 基本流程

1. 信息收集（扩大攻击面，找敏感目录、文件）
2. Web服务突破（找漏洞）
3. 获取Web服务器wwwroot权限（利用漏洞种小马）
4. 提权，拿到服务器管理员权限（种大马）
5. 横向移动，内网渗透
6. 获取域内其他服务器权限

## 漏洞

### 逻辑漏洞

[^对某大学的渗透](https://xz.aliyun.com/t/7686)

> 网站开发者进行逻辑功能开发时，用户使用方式/流程与设计不符，造成的非预期结果。

- **垂直越权**

  跨越权限访问

- **水平越权**

  同权限用户访问，通过更换身份标识，使A账号获取B账号数据

```
burpsuite -authz
```

#### 垂直越权方法

> 前提条件：获取越权操作的数据包

1. 普通用户前端有操作界面可以抓取数据包
2. 通过网站源码本地搭建 模拟抓取
3. 盲猜

#### 工具

1. `Secscan-authcheck`
2. `burpsuite -authz`

### 登录应用功能点安全问题

> 检测功能点、危害、修复方案

1. 登录点暴力破解
2. HTTP/HTTPS传输
3. Cookie脆弱点验证
4. Session固定点测试
5. 验证密文比对安全

### 任意密码重置、修改

1. 验证码不失效/糊弄用户的验证码
2. 验证码与用户未一一对应（可替换账号、手机号）
3. 前端校验
4. 

### 支付漏洞

1. 替换支付
2. 重复支付
3. 最小额支付
4. 负数支付
5. 溢出支付
6. 优惠券支付

#### 常见篡改参数

1. 商品编号ID
2. 购买价格
3. 购买数量
4. 支付方式
5. 订单号
6. 支付状态
