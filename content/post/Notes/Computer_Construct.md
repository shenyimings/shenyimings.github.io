---
author: "Yiming Shen"
date: 2022-03-15
lastmod: 2022-03-15
title: "计算机组成原理笔记"
tags: [
   "408",
    "计组",
    "Note",
]
categories: [
    "Notes", 
"Courses",
]
math: true
ShowToc: true
draft: false
typora-root-url: ..\..\static\
---

> **2022.3.15**

 ## 浮点数

### 原码一位乘

部分积累加、移位

乘积
$$
P = |X|\times |Y|\\\\
S_p=S_X异或S_Y
$$


手工运算和十进制乘法类似

> 每次将1位乘数所对应的部分积与原部分的累加和相加，并移位

#### 设置寄存器

A：存放部分**积累加和，乘积高位**

B：存放**被乘数**

C：存放**乘数、乘积低位**

最后符号异或。



### 补码一位乘法

#### Booth 比较法

$$
[XY]_补 ＝[X]_补[0.Y_1Y_2\cdots Y_n]-[X]_补Y_0
$$

| Yn高位 | Yn+1低位 | 运算操作  |
| ------ | -------- | --------- |
| 0      | 0        | 1/2 * A补 |
| 0      | 1        | 1、2      |
| 1      | 0        |           |
| 1      | 1        |           |



#### 例题

X＝-0.1101 Y=-0.1011 计算[XY]补

初始化A＝00.0000

B=X=11.0011

-B=-X=00.1101

C=Y=1.0101

#### 原码两位乘法 （略）

### 定点数的除法

<h4 style="color: red">补码不恢复余数除法</h4>

([X]<[Y])
$$
被除数X_补 \quad 除数Y_补\\\\
余数r_i=0,1,\cdots
$$

$$
r_0=X_补 比较r_0与Y_补符号\\\\
同号上商1 异号上商0
$$

| r/Y补 数符 | 商   | 对应操作            |
| ---------- | ---- | ------------------- |
| 同号       | 1    | ri+1=2*\|ri\|补-Y补 |
| 异号       | 0    | ri+1=2*\|ri\|补-Y补 |

商修正：符号位+1 末尾恒置1

余数修正： 左移了n次，则余数＝2^n * rn



#### 补码恢复余数除法（用的少）



#### 原码恢复/不恢复余数除法（不要求）



### IEEE754 浮点四则运算

#### 实现

> 1. 通过子程序
> 2. 通过浮点处理器
> 3. 通过专门的浮点运算部件

#### 运算

浮点数运算👉尾数运算、阶码运算

尾数加减乘除  阶码移码加减

#### 短浮点数阶码加减

*偏移127*
$$
E_b = E_x+E_y+129(mod\quad 2^8)
$$
原理推导：
$$
[E_x+E_y]_移 = 127+(E_x+E_y)=(127+E_x)+(127+E_y)-127
$$

#### 浮点数的加减

移位操作 尾数原码加减

1. 检测是否能简化操作（尾数是否为0 有无下溢）

2. 计算阶差

3. 对阶（使阶数增大）

   > 低位向高位看齐，右移时补1以减少误差

   目的：使两数阶码相等，减少误差。

4. 尾数加减

5. 结果规格化

   > 使1<|M|<2

#### 浮点数乘法

$$
A=2^{AE}\times A_M 
$$

#### 浮点数除法

---

## 数据的校验

### 奇偶校验

> 增设1位校验位，从而使1的个数是奇或偶数

### 海明校验

> - 多重分组奇偶校验
> - 若干分组，每组都进行奇偶校验
> - 能够检验是否出错，也能定位出错位

[假设] 待编码信息K位 分成r组，每组1个校验位

校验码位数 r位；

海明编码总长：N=k+r位

海明编码时，各组单独进行奇偶校验编码，确定编码位



#### 指误码

代码检验时 每组能产生1个错误码

r位指误码

2^r种可能的错误代码

**指误码全为0则无错**

各参数应满足：
$$
N = k+r\le 2^r-1
$$

#### 分组方法

> 有效信息：A1A2A3A4 校验位：P1P2P3 偶校验

| 1    | 2    | 3    | 4    | 5    | 6    | 7   |
| ---- | ---- | ---- | ---- | ---- | ---- | ----|
| P1   | P2   | A1   | P3   | A2   | A3   | A4 |
|      |      |      | √ | √ | √ | √ |
|      | √ | √ |      |      | √ | √ |
| √ |      | √ |      | √ |      | √ |
| 1 | 0 | 0 | 1 | 0 | 1 | 1 |
| 1 | 0 | 0 | 1 | **1** | 1 | 1 |



*还有指误码*

> - 对码字的位从1到n编号 并表示为二进制数
> - 对2的每一个幂(1,2,4…)设置一个奇偶位，其他位置存放数据。

0011 的海明码

| 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| C1   | C2   | 0    | C4   | 0    | 1    | 1    |

C1 = 3 xor 5 xor 7 ＝ 1

C2 = 3 xor 6 xor 7 ＝ 0

C4 = 5 xor 6 xor 7 ＝ 0

横坐标是信息 纵坐标是第几次校验

#### 海明码的纠错过程

> 形成新的检测位P_i

（不能连错两个）

